import re
CHARACTER_PINYIN_ENGLISH_MAPPING = {
    "的": ["de", ""],
    "说": ["", ""],
    "是": ["", ""],
    "花": ["", ""],
    "妈": ["", ""],
    "马": ["", ""],
    "牛": ["", ""],
    "羊": ["", ""],
    "鱼": ["", ""],
    "虫": ["", ""],
    "鸟": ["", ""],
    "草": ["", ""],
    "黄": ["", ""],
    "白": ["", ""],
    "黑": ["", ""],
    "绿": ["", ""],
    "红": ["", ""],
    "蓝": ["", ""],
}


####################################################
####################################################
######### DO NOT TOUCH THE CODE BELOW! #########################
####################################################
####################################################
####################################################
PinyinToneMark = {
    0: "aoeiuv\u00fc",
    1: "\u0101\u014d\u0113\u012b\u016b\u01d6\u01d6",
    2: "\u00e1\u00f3\u00e9\u00ed\u00fa\u01d8\u01d8",
    3: "\u01ce\u01d2\u011b\u01d0\u01d4\u01da\u01da",
    4: "\u00e0\u00f2\u00e8\u00ec\u00f9\u01dc\u01dc",
}


def decode_pinyin(s):
    s = s.lower()
    r = ""
    t = ""
    for c in s:
        if c >= 'a' and c <= 'z':
            t += c
        elif c == ':':
            assert t[-1] == 'u'
            t = t[:-1] + "\u00fc"
        else:
            if c >= '0' and c <= '5':
                tone = int(c) % 5
                if tone != 0:
                    m = re.search("[aoeiuv\u00fc]+", t)
                    if m is None:
                        t += c
                    elif len(m.group(0)) == 1:
                        pos = PinyinToneMark[0].index(m.group(0))
                        t = t[:m.start(
                            0)] + PinyinToneMark[tone][pos] + t[m.end(0):]
                    else:
                        if 'a' in t:
                            t = t.replace("a", PinyinToneMark[tone][0])
                        elif 'o' in t:
                            t = t.replace("o", PinyinToneMark[tone][1])
                        elif 'e' in t:
                            t = t.replace("e", PinyinToneMark[tone][2])
                        elif t.endswith("ui"):
                            t = t.replace("i", PinyinToneMark[tone][3])
                        elif t.endswith("iu"):
                            t = t.replace("u", PinyinToneMark[tone][4])
                        else:
                            t += "!"
            r += t
            t = ""
    r += t
    return r


CHARACTER_PINYIN_ENGLISH_MAPPING_BACK = {
    "从": ["", ""],
    "自己": ["", ""],
    "问题": ["", ""],
    "女朋友": ["nv3 peng2 you", "girl friend"],
    "风": ["", "wind"],
    "云": ["", "cloud"],
    "雨": ["", "to rain; to fall"],
    "雪": ["", "snow; snowfall"],
    "电": ["", "electric; electricity; electrical"],
    "天": ["", "day; sky; heaven"],
    "地": ["di4", "earth; ground; field; place; land"],
    "春": ["", "spring (time)"],
    "夏": ["", "summer"],
    "秋": ["", "autumn"],
    "冬": ["", "winter"],
    "干净": ["", "clean; neat"],
    "家庭": ["", "family; household"],
    "圆珠笔": ["", "ballpoint pen"],
    "种类": ["", "kind; type"],
    "花样": ["", "variety; way of doing thing; trick"],
    "刮风": ["", "blow wind"],
    "风格": ["", "style"],
    "云南": ["", "Yunnan Province"],
    "一场雨": ["yi1 chang2 yu3", "one rain"],
    "冰雪": ["", "ice and snow"],
    "电冰箱": ["", "refrigerator"],
    "电话": ["", "telephone"],
    "电饭锅": ["", "electric cooker"],
    "电风扇": ["", "electric fan"],
    "一天": ["", "one day"],
    "今天": ["", "today"],
    "天气": ["", "weather"],
    "晴天": ["", "sunny day"],
    "地区": ["", "district; area; region; suburb"],
    "春天": ["", "spring season"],
    "春节": ["", "Spring Festival"],
    "夏天": ["", "summer season"],
    "秋天": ["", "autumn season"],
    "冬天": ["", "winter season"],
    "我饿了": ["wo3 e4 le", "hungry"],
    "妈妈老了": ["ma1 ma lao3 le", "mum is old"],
    "下雨了": ["xia4 yu3 le", "it rains"],
    "你有女朋友了吗": ["", "do you have girl friend?"],
    "我不买了": ["wo3 bu4 mai3 le", "i will not buy it"],
    "我不回家吃饭了": ["wo3 bu4 hui2 jia1 chi1 fan4 le", "i am not coming home for dinner"],
    "每天都": ["mei3 tian1 dou1", "(do something all the time) every day"],
    "市": ["", ""],
    "各": ["", ""],
    "颜": ["", ""],
    "练": ["", ""],
    "许": ["", ""],
    "漂": ["piao4", ""],
    "尺": ["", ""],
    "刀": ["", ""],
    "支": ["", ""],
    "行": ["hang2", ""],
    "商": ["", ""],
    "鞋": ["", ""],
    "品": ["", ""],
    "制": ["", ""],
    "每": ["", ""],
    "铅": ["", ""],
    "因": ["", ""],
    "呆": ["dai1", ""],
    "难": ["nan2", ""],
    "所": ["", ""],
    "馆": ["", ""],
    "空": ["kong4", ""],
    "菜": ["", ""],
    "肉": ["", ""],
    "鲜": ["", ""],
    "青": ["", ""],
    "味": ["", ""],
    "茶": ["", ""],
    "汤": ["", ""],
    "鸡": ["", ""],
    "炒": ["", ""],
    "极": ["", ""],
    "饱": ["", ""],
    "顿": ["", ""],
    "备": ["", ""],
    "减": ["", ""],
    "肥": ["", ""],
    "旁": ["", ""],
    "操": ["", ""],
    "加": ["", ""],
    "油": ["", ""],
    "站": ["", ""],
    "阔": ["", ""],
    "速": ["", ""],
    "路": ["", ""],
    "刷": ["", ""],
    "挡": ["", ""],
    "净": ["", ""],
    "表": ["", ""],
    "数": ["shu4", ""],
    "谈": ["", ""],
    "指": ["", ""],
    "辆": ["", ""],
    "越": ["", ""],
    "骑": ["", ""],
    "川": ["", ""],
    "野": ["", ""],
    "未": ["", ""],
    "总": ["", ""],
    "得": ["dei3", ""],
    "找": ["", ""],
    "借": ["", ""],
    "行": ["xing2", ""],
    "脏": ["zang1", ""],
    "害": ["", ""],
    "轻": ["", ""],
    "您": ["", ""],
    "算": ["", ""],
    "坏": ["", ""],
    "近": ["", ""],
    "反": ["", ""],
    "扑": ["", ""],
    "逃": ["", ""],
    "半": ["", ""],
    "肚": ["", ""],
    "暗": ["", ""],
    "笨": ["", ""],
    "渴": ["", ""],
    "架": ["", ""],
    "哈": ["", ""],
    "运": ["", ""],
    "错": ["", ""],
    "准": ["", ""],
    "摘": ["", ""],
    "够": ["", ""],
    "着": ["zhao2", ""],
    "始": ["", ""],
    "终": ["", ""],
    "累": ["", ""],
    "垂": ["", ""],
    "丧": ["", ""],
    "酸": ["", ""],
    "羽": ["", ""],
    "齐": ["", ""],
    "材": ["", ""],
    "吞": ["", ""],
    "其": ["", ""],
    "并": ["", ""],
    "守": ["", ""],
    "待": ["", ""],
    "棵": ["", ""],
    "休": ["", ""],
    "息": ["", ""],
    "撞": ["", ""],
    "死": ["", ""],
    "此": ["", ""],
    "求": ["", ""],
    "剑": ["", ""],
    "赶": ["", ""],
    "急": ["", ""],
    "识": ["", ""],
    "奋": ["", ""],
    "晨": ["", ""],
    "武": ["", ""],
    "章": ["", ""],
    "慈": ["", ""],
    "线": ["", ""],
    "临": ["", ""],
    "密": ["", ""],
    "缝": ["feng2", ""],
    "恐": ["", ""],
    "迟": ["", ""],
    "归": ["", ""],
    "寸": ["", ""],
    "绝": ["", ""],
    "灭": ["", ""],
    "翁": ["", ""],
    "独": ["", ""],
    "寒": ["", ""],
    "民": ["", ""],
    "阴": ["", ""],
    "杂": ["", ""],
    "君": ["", ""],
    "应": ["", ""],
    "梅": ["", ""],
    "历": ["", ""],
    "史": ["", ""],
    "繁": ["", ""],
    "荣": ["", ""],
    "强": ["", ""],
    "侨": ["", ""],
    "集": ["", ""],
    "功": ["", ""],
    "卖": ["", ""],
    "节": ["", ""],
    "贴": ["tie1", ""],
    "舞": ["", ""],
    "重": ["chong2", ""],
    "庆": ["", ""],
    "福": ["", ""],
    "拜": ["", ""],
    "访": ["", ""],
    "载": ["", ""],
    "卫": ["", ""],
    "射": ["", ""],
    "升": ["", ""],
    "雷": ["", ""],
    "客": ["", ""],
    "旗": ["", ""],
    "币": ["", ""],
    "纪": ["", ""],
    "念": ["", ""],
    "程": ["", ""],
    "雄": ["", ""],
    "顺": ["", ""],
    "利": ["", ""],
    "勇": ["", ""],
    "曾": ["ceng2", ""],
    "除": ["", ""],
    "杀": ["", ""],
    "咬": ["", ""],
    "散": ["", ""],
    "称": ["cheng1", ""],
    "象": ["", ""],
    "官": ["", ""],
    "墙": ["", ""],
    "腿": ["", ""],
    "秤": ["", ""],
    "切": ["qie1", ""],
    "摇": ["", ""],
    "主": ["", ""],
    "沉": ["", ""],
    "赞": ["", ""],
    "男": ["", ""],
    "政": ["", ""],
    "胜": ["", ""],
    "敌": ["", ""],
    "导": ["", ""],
    "浇": ["", ""],
    "椅": ["", ""],
    "解": ["", ""],
    "题": ["", ""],
    "相": ["", ""],
    "遇": ["", ""],
    "情": ["", ""],
    "为": ["wei2", ""],
    "讨": ["", ""],
    "论": ["", ""],
    "度": ["", ""],
    "愉": ["", ""],
    "简": ["", ""],
    "单": ["", ""],
    "脾": ["", ""],
    "忘": ["", ""],
    "扰": ["", ""],
    "悄": ["", ""],
    "桌": ["", ""],
    "父": ["", ""],
    "穷": ["", ""],
    "但": ["", ""],
    "改": ["", ""],
    "留": ["", ""],
    "合": ["", ""],
    "适": ["", ""],
    "误": ["", ""],
    "检": ["", ""],
    "性": ["", ""],
    "部": ["", ""],
    "伟": ["", ""],
    "译": ["", ""],
    "演": ["", ""],
    "台": ["", ""],
    "松": ["", ""],
    "逗": ["", ""],
    "严": ["", ""],
    "引": ["", ""],
    "超": ["", ""],
    "信": ["", ""],
    "封": ["", ""],
    "城": ["", ""],
    "邮": ["", ""],
    "票": ["", ""],
    "京": ["", ""],
    "安": ["", ""],
    "广": ["", ""],
    "场": ["chang3", ""],
    "全": ["", ""],
    "平": ["", ""],
    "提": ["", ""],
    "取": ["", ""],
    "进": ["", ""],
    "孙": ["", ""],
    "由": ["", ""],
    "视": ["", ""],
    "景": ["", ""],
    "非": ["", ""],
    "陪": ["", ""],
    "愉": ["", ""],
    "美": ["", ""],
    "丽": ["", ""],
    "完": ["", ""],
    "登": ["", ""],
    "色": ["", ""],
    "岸": ["", ""],
    "岛": ["", ""],
    "沿": ["", ""],
    "座": ["", ""],
    "桥": ["", ""],
    "柱": ["", ""],
    "狮": ["", ""],
    "分": ["fen1", ""],
    "啊": ["a", ""],
    "著": ["zhu4", ""],
    "建": ["", ""],
    "求": ["", ""],
    "丰": ["", ""],
    "墙": ["", ""],
    "站": ["", ""],
    "宫": ["", ""],
    "林": ["", ""],
    "王": ["", ""],
    "厅": ["", ""],
    "些": ["", ""],
    "趣": ["", ""],
    "镜": ["", ""],
    "窗": ["", ""],
    "映": ["", ""],
    "如": ["", ""],
    "样": ["", ""],
    "香": ["", ""],
    "影": ["", ""],
    "迷": ["", ""],
    "世": ["", ""],
    "界": ["", ""],
    "筑": ["", ""],
    "殿": ["", ""],
    "内": ["", ""],
    "客": ["", ""],
    "观": ["", ""],
    "晒": ["", ""],
    "照": ["", ""],
    "处": ["", ""],
    "寻": ["", ""],
    "熟": ["", ""],
    "服": ["", ""],
    "暖": ["", ""],
    "才": ["", ""],
    "健": ["", ""],
    "康": ["", ""],
    "彩": ["", ""],
    "虹": ["", ""],
    "赞": ["", ""],
    "躲": ["", ""],
    "喝": ["", ""],
    "伯": ["", ""],
    "深": ["", ""],
    "浅": ["", ""],
    "正": ["", ""],
    "突": ["", ""],
    "该": ["", ""],
    "办": ["", ""],
    "定": ["", ""],
    "原": ["", ""],
    "既": ["", ""],
    "像": ["", ""],
    "折": ["zhe2", ""],
    "筷": ["", ""],
    "轻": ["", ""],
    "兄": ["", ""],
    "力": ["", ""],
    "捞": ["", ""],
    "晚": ["", ""],
    "群": ["", ""],
    "啦": ["", ""],
    "于": ["", ""],
    "直": ["", ""],
    "接": ["", ""],
    "挂": ["", ""],
    "伸": ["", ""],
    "刚": ["", ""],
    "碰": ["", ""],
    "抬": ["", ""],
    "玉": ["", ""],
    "夹": ["", ""],
    "另": ["", ""],
    "断": ["", ""],
    "禁": ["", ""],
    "剩": ["", ""],
    "晓": ["", ""],
    "眠": ["", ""],
    "闻": ["", ""],
    "啼": ["", ""],
    "落": ["", ""],
    "农": ["", ""],
    "当": ["dang1", ""],
    "汗": ["", ""],
    "滴": ["", ""],
    "盘": ["", ""],
    "餐": ["", ""],
    "粒": ["", ""],
    "皆": ["", ""],
    "辛": ["", ""],
    "苦": ["", ""],
    "斜": ["", ""],
    "鸣": ["", ""],
    "翠": ["", ""],
    "青": ["", ""],
    "含": ["", ""],
    "聪": ["", ""],
    "戏": ["", ""],
    "缸": ["", ""],
    "装": ["", ""],
    "吓": ["", ""],
    "哭": ["", ""],
    "惊": ["", ""],
    "慌": ["", ""],
    "法": ["", ""],
    "块": ["", ""],
    "使": ["", ""],
    "劲": ["", ""],
    "砸": ["", ""],
    "救": ["", ""],
    "调": ["tiao2", ""],
    "但": ["", ""],
    "错": ["", ""],
    "够": ["", ""],
    "总": ["", ""],
    "命": ["", ""],
    "数": ["shu3", ""],
    "空": ["kong1", ""],
    "靠": ["", ""],
    "仰": ["", ""],
    "颗": ["", ""],
    "久": ["", ""],
    "清": ["", ""],
    "连": ["", ""],
    "勺": ["", ""],
    "离": ["", ""],
    "努": ["", ""],
    "术": ["", ""],
    "油": ["", ""],
    "助": ["", ""],
    "呀": ["", ""],
    "借": ["", ""],
    "答": ["da2", ""],
    "弯": ["", ""],
    "船": ["", ""],
    "尖": ["", ""],
    "握": ["", ""],
    "毛": ["", ""],
    "箭": ["", ""],
    "圆": ["", ""],
    "串": ["", ""],
    "苹": ["", ""],
    "葡": ["", ""],
    "萄": ["tao", ""],
    "特": ["", ""],
    "虽": ["", ""],
    "整": ["", ""],
    "输": ["", ""],
    "改": ["", ""],
    "永": ["", ""],
    "言": ["", ""],
    "富": ["", ""],
    "晴": ["", ""],
    "搬": ["", ""],
    "伞": ["", ""],
    "冰": ["", ""],
    "化": ["", ""],
    "叶": ["", ""],
    "妙": ["", ""],
    "细": ["", ""],
    "察": ["", ""],
    "懂": ["", ""],
    "燕": ["", ""],
    "湿": ["", ""],
    "闷": ["", ""],
    "脚": ["", ""],
    "透": ["", ""],
    "宇": ["", ""],
    "航": ["", ""],
    "员": ["", ""],
    "次": ["", ""],
    "球": ["", ""],
    "实": ["", ""],
    "类": ["", ""],
    "梦": ["", ""],
    "号": ["hao4", ""],
    "达": ["", ""],
    "泥": ["", ""],
    "卫": ["", ""],
    "切": ["qie4", ""],
    "迎": ["", ""],
    "准": ["", ""],
    "留": ["", ""],
    "刮": ["", ""],
    "上": ["", ""],
    "中": ["", "middle;center"],
    "下": ["", ""],
    "左": ["", ""],
    "右": ["", ""],
    "来": ["", ""],
    "去": ["", ""],
    "出": ["", ""],
    "入": ["", ""],
    "坐": ["", ""],
    "立": ["", ""],
    "走": ["", ""],
    "山上": ["", "on the mountain"],
    "山下": ["", "down the mountain"],
    "上头": ["shang4 tou", "above"],
    "下头": ["xia4 tou", "below;down;beneath"],
    "手中": ["", "in the hand"],
    "口中": ["", "in the mouth"],
    "左手": ["", ""],
    "右手": ["", ""],
    "左耳": ["", "left ear"],
    "右耳": ["", "right ear"],
    "上下": ["", "up and down"],
    "上上下下": ["", "ups and downs;left and right;everywhere"],
    "一上一下": ["", "one up and one down"],
    "一左一右": ["", "one left and one right"],
    "坐下": ["", ""],
    "走来": ["", "come (towards speaker)"],
    "走去": ["", ""],
    "走出去": ["", "walk out"],
    "长": ["", "long"],
    "写": ["", ""],
    "字": ["", ""],
    "它": ["", ""],
    "最": ["", ""],
    "忙": ["", ""],
    "嘴巴": ["zui3 ba", "mouth"],
    "身子": ["shen1 zi", ""],
    "写字": ["", ""],
    "普通": ["", ""],
    "少数": ["", ""],
    "了不起": ["liao3 bu4 qi3", ""],
    "赶": ["", "to overtake; to catch up with; o hurry; to rush; to try to catch (the bus etc)"],
    "培训班": ["", "training class"],
    "日": ["rì", "sun"],
    "月": ["yuè", "moon"],
    "山": ["shān", "mountain"],
    "石": ["shí", "rock"],
    "土": ["tǔ", "earth"],
    "田": ["tián", "field"],
    "水": ["shuǐ", "water"],
    "火": ["huǒ", "fire"],
    "木": ["mù", "tree"],
    "禾": ["hé", "cereal"],
    "到": ["dào", "to (a place)"],
    "我": ["wǒ", "I"],
    "有": ["yǒu", "to have"],
    "左": ["zuǒ", "left"],
    "来": ["lái", "to come"],
    "右": ["yòu", "right (-hand)"],
    "个": ["gè", "measure word"],
    "指": ["zhǐ", "finger"],
    "人": ["rén", "man"],
    "头": ["tóu", "head;suffix for nouns"],
    "目": ["mù", "eye"],
    "口": ["kǒu", "mouth"],
    "耳": ["ěr", "ear"],
    "手": ["shǒu", "hand"],
    "足": ["zú", "foot"],
    "大": ["dà", "big"],
    "小": ["xiǎo", "small"],
    "多": ["duō", "many"],
    "少": ["shǎo", "few"],
    "只": ["zhǐ", "classifier for birds and certain animals, one of a pair, some utensils, vessels etc"],
    "双": ["shuāng", "double"],
    "脚": ["jiǎo", "foot"],
    "花样": ["hua1 yang4", ""],
}
